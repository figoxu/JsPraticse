<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript">
        var arr=[1,2,3,4,5]
        Array.prototype.forEachL= function(fn,that){
            for(var i=0;i<this.length;i++){
                fn.call(that||null,this[i],i,this);
            }
        }
        console.log("pass document as that")
        arr.forEachL(function(val,index,all){
            console.log("=====>")
            console.log("@index:",index)
            console.log("@this:",this)
            console.log("@val:",val)
            console.log("@all:",all)
            console.log("<=====")
        },document);
        console.log("pass window as that")
        arr.forEachL(function(val,index,all){
            console.log("=====>")
            console.log("@index:",index)
            console.log("@this:",this)
            console.log("@val:",val)
            console.log("@all:",all)
            console.log("<=====")
        },window);
    </script>
</head>
<body>

<ul id="ul">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
</ul>
<script type="text/javascript">
//    parse elements as array
    var liElements = document.getElementsByTagName('li');
    var arr = Array.prototype.slice.call(liElements);
    console.log(arr)
    arr.forEach(function(elem,index,all){
        elem.onclick = function(){
            all[index].style.background='pink';
        }
    },document)
</script>
</body>
</html>